
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Archive Quote</h3>
        <a class="navbar-triangle"></a>
    </div>
    <div class="panel-body ">

        <form name="archiveForm" class="form-horizontal" novalidate role="form">
            <div>

                <br />
                <div class="form-group" ng-class="{ 'has-error' : archiveForm.reference.$invalid && !archiveForm.reference.$pristine || (!quote.selectedQuote && archiveForm.reference.$touched && quote.quote) }">
                    <label for="quote" class="col-xs-3 control-label">Quote: </label>
                    <div class="col-xs-8">
                      <pre>Model: {{quote.selectedQuote | json}}</pre>
                      <input id="umr" typee="text" autocomplete="off" auto-complete auto-complete-id-selected="quote.selectedQuote" required name="reference" ui-items="quote.quotesList" ng-blur="ucr.ValidateUMR()" ng-keypress="ucr.umrErrorText=''" ng-change="quote.UpdateAutocomplete();" ng-model="quote.quote" class="form-control input-sm" /><span class="mandatory-mark">*</span>
                      <!--<input autocomplete="off" name="reference" type="text" ng-model="quote.quote" ng-change="quote.UpdateAutocomplete();quote.selectedQuote =''" uib-typeahead="q.QuoteValue for q in quote.quotesList" typeahead-on-select="quote.selectedQuote=$item.QuoteNodeId" class="form-control input-sm ">-->
                        <p ng-show="archiveForm.reference.$invalid && !archiveForm.reference.$pristine" class="help-block">Quote Reference is required.</p>
                        <p ng-show="!quote.selectedQuote && archiveForm.reference.$touched && quote.quote" class="help-block ">Quote Reference is not valid.</p>
                    </div>
                </div>


                <div class="form-group" ng-class="{ 'has-error' : archiveForm.reason.$invalid && !archiveForm.reason.$pristine }">
                    <label class="col-xs-3 control-label">Archive Reason: </label>
                    <div class="col-xs-8">
                        <select name="reason" required ng-model="quote.archive_reason" class="form-control input-sm">
                            <option ng-repeat="reason in quote.ntu_reasons" value="{{reason.Id}}">{{reason.Reason}}</option>
                        </select><span class="mandatory-mark">*</span>
                        <p ng-show="archiveForm.reason.$invalid && !archiveForm.reason.$pristine" class="help-block">Archive Reason is required.</p>

                    </div>
                </div>


                <br />
                <br />

                <div class="form-group">
                    <div class="col-sm-7"></div>
                    <div class="col-sm-2">
                        <button type="button" ng-click="quote.Cancel()" class="btn btn-tiw-green btn-primary btn-block">Cancel</button>
                    </div>
                    <div class="col-sm-2">
                        <button type="button" ng-disabled="archiveForm.$invalid || !quote.selectedQuote" ng-click="quote.Finish()" class="btn btn-tiw-green btn-primary btn-block">Finish</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

